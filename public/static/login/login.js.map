{
  "version": 3,
  "sources": ["login.ts"],
  "sourcesContent": ["// public/static/login/login.ts\r\n\r\nfunction qs<T extends Element>(sel: string, root: ParentNode = document): T | null {\r\n    return root.querySelector(sel) as T | null;\r\n}\r\n\r\nfunction setToggleState(btn: HTMLButtonElement, isVisible: boolean): void {\r\n    btn.setAttribute(\"aria-pressed\", String(isVisible));\r\n    btn.setAttribute(\"aria-label\", isVisible ? \"Ocultar senha\" : \"Mostrar senha\");\r\n\r\n    const labelEl = btn.querySelector<HTMLElement>(\".toggle-password__text\");\r\n    const label = isVisible ? \"Ocultar\" : \"Mostrar\";\r\n\r\n    if (labelEl) labelEl.textContent = label;\r\n    else btn.textContent = label;\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    const form = qs<HTMLFormElement>(\"form\");\r\n    if (!form) return;\r\n\r\n    const emailInput = qs<HTMLInputElement>('input[name=\"email\"]', form);\r\n    const passInput = qs<HTMLInputElement>('input[name=\"password\"]', form);\r\n    const submitBtn = qs<HTMLButtonElement>('button[type=\"submit\"]', form);\r\n\r\n    // Toggle mostrar/ocultar senha\r\n    if (passInput) {\r\n        const targetId = passInput.id || \"password\";\r\n\r\n        let toggleBtn =\r\n            qs<HTMLButtonElement>(\".toggle-password\", form) ||\r\n            qs<HTMLButtonElement>(`button[data-target=\"${targetId}\"]`, form);\r\n\r\n        // Fallback: se n\u00E3o existir bot\u00E3o no HTML, cria um (evita quebrar se mudar o template)\r\n        if (!toggleBtn) {\r\n            toggleBtn = document.createElement(\"button\");\r\n            toggleBtn.type = \"button\";\r\n            toggleBtn.className = \"toggle-password\";\r\n            toggleBtn.setAttribute(\"data-target\", targetId);\r\n            toggleBtn.setAttribute(\"aria-label\", \"Mostrar senha\");\r\n            toggleBtn.setAttribute(\"aria-pressed\", \"false\");\r\n\r\n            const span = document.createElement(\"span\");\r\n            span.className = \"toggle-password__text\";\r\n            span.textContent = \"Mostrar\";\r\n            toggleBtn.appendChild(span);\r\n\r\n            // tenta inserir ap\u00F3s o input (caso n\u00E3o tenha wrapper)\r\n            passInput.insertAdjacentElement(\"afterend\", toggleBtn);\r\n        }\r\n\r\n        // estado inicial\r\n        setToggleState(toggleBtn, passInput.type === \"text\");\r\n\r\n        toggleBtn.addEventListener(\"click\", () => {\r\n            const willShow = passInput.type === \"password\";\r\n            passInput.type = willShow ? \"text\" : \"password\";\r\n            setToggleState(toggleBtn!, passInput.type === \"text\");\r\n            passInput.focus();\r\n        });\r\n\r\n        // Extra (leve): ESC oculta a senha se estiver vis\u00EDvel\r\n        passInput.addEventListener(\"keydown\", (ev) => {\r\n            if (ev.key === \"Escape\" && passInput.type === \"text\") {\r\n                passInput.type = \"password\";\r\n                setToggleState(toggleBtn!, false);\r\n            }\r\n        });\r\n    }\r\n\r\n    form.addEventListener(\"submit\", (e) => {\r\n        const email = (emailInput?.value ?? \"\").trim().toLowerCase();\r\n        const pass = passInput?.value ?? \"\";\r\n\r\n        if (!email || !pass) {\r\n            e.preventDefault();\r\n            alert(\"Preencha e-mail e senha.\");\r\n            return;\r\n        }\r\n\r\n        // normaliza e-mail antes de enviar\r\n        if (emailInput) emailInput.value = email;\r\n\r\n        // evita clique duplo\r\n        if (submitBtn) {\r\n            submitBtn.disabled = true;\r\n            const oldText = submitBtn.textContent;\r\n            submitBtn.textContent = \"Entrando...\";\r\n\r\n            // fallback: se n\u00E3o navegar por algum motivo, reabilita em 6s\r\n            window.setTimeout(() => {\r\n                submitBtn.disabled = false;\r\n                submitBtn.textContent = oldText ?? \"Entrar\";\r\n            }, 6000);\r\n        }\r\n    });\r\n});\r\n"],
  "mappings": "mBAEA,SAASA,EAAsBC,EAAaC,EAAmB,SAAoB,CAC/E,OAAOA,EAAK,cAAcD,CAAG,CACjC,CAEA,SAASE,EAAeC,EAAwBC,EAA0B,CACtED,EAAI,aAAa,eAAgB,OAAOC,CAAS,CAAC,EAClDD,EAAI,aAAa,aAAcC,EAAY,gBAAkB,eAAe,EAE5E,IAAMC,EAAUF,EAAI,cAA2B,wBAAwB,EACjEG,EAAQF,EAAY,UAAY,UAElCC,EAASA,EAAQ,YAAcC,EAC9BH,EAAI,YAAcG,CAC3B,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,IAAMC,EAAOR,EAAoB,MAAM,EACvC,GAAI,CAACQ,EAAM,OAEX,IAAMC,EAAaT,EAAqB,sBAAuBQ,CAAI,EAC7DE,EAAYV,EAAqB,yBAA0BQ,CAAI,EAC/DG,EAAYX,EAAsB,wBAAyBQ,CAAI,EAGrE,GAAIE,EAAW,CACX,IAAME,EAAWF,EAAU,IAAM,WAE7BG,EACAb,EAAsB,mBAAoBQ,CAAI,GAC9CR,EAAsB,uBAAuBY,CAAQ,KAAMJ,CAAI,EAGnE,GAAI,CAACK,EAAW,CACZA,EAAY,SAAS,cAAc,QAAQ,EAC3CA,EAAU,KAAO,SACjBA,EAAU,UAAY,kBACtBA,EAAU,aAAa,cAAeD,CAAQ,EAC9CC,EAAU,aAAa,aAAc,eAAe,EACpDA,EAAU,aAAa,eAAgB,OAAO,EAE9C,IAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,wBACjBA,EAAK,YAAc,UACnBD,EAAU,YAAYC,CAAI,EAG1BJ,EAAU,sBAAsB,WAAYG,CAAS,CACzD,CAGAV,EAAeU,EAAWH,EAAU,OAAS,MAAM,EAEnDG,EAAU,iBAAiB,QAAS,IAAM,CACtC,IAAME,EAAWL,EAAU,OAAS,WACpCA,EAAU,KAAOK,EAAW,OAAS,WACrCZ,EAAeU,EAAYH,EAAU,OAAS,MAAM,EACpDA,EAAU,MAAM,CACpB,CAAC,EAGDA,EAAU,iBAAiB,UAAYM,GAAO,CACtCA,EAAG,MAAQ,UAAYN,EAAU,OAAS,SAC1CA,EAAU,KAAO,WACjBP,EAAeU,EAAY,EAAK,EAExC,CAAC,CACL,CAEAL,EAAK,iBAAiB,SAAWS,GAAM,CACnC,IAAMC,GAAST,GAAY,OAAS,IAAI,KAAK,EAAE,YAAY,EACrDU,EAAOT,GAAW,OAAS,GAEjC,GAAI,CAACQ,GAAS,CAACC,EAAM,CACjBF,EAAE,eAAe,EACjB,MAAM,0BAA0B,EAChC,MACJ,CAMA,GAHIR,IAAYA,EAAW,MAAQS,GAG/BP,EAAW,CACXA,EAAU,SAAW,GACrB,IAAMS,EAAUT,EAAU,YAC1BA,EAAU,YAAc,cAGxB,OAAO,WAAW,IAAM,CACpBA,EAAU,SAAW,GACrBA,EAAU,YAAcS,GAAW,QACvC,EAAG,GAAI,CACX,CACJ,CAAC,CACL,CAAC",
  "names": ["qs", "sel", "root", "setToggleState", "btn", "isVisible", "labelEl", "label", "form", "emailInput", "passInput", "submitBtn", "targetId", "toggleBtn", "span", "willShow", "ev", "e", "email", "pass", "oldText"]
}
