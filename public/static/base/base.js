"use strict";(()=>{function i(e,t=document){return t.querySelector(e)}function v(e,t){e.setAttribute("aria-pressed",String(t)),e.setAttribute("aria-label",t?"Ocultar senha":"Mostrar senha");let n=e.querySelector(".toggle-password__text"),a=t?"Ocultar":"Mostrar";n?n.textContent=a:e.textContent=a}document.addEventListener("DOMContentLoaded",()=>{let e=i("form");if(!e)return;let t=i('input[name="email"]',e),n=i('input[name="password"]',e),a=i('button[type="submit"]',e);if(n){let d=n.id||"password",o=i(".toggle-password",e)||i(`button[data-target="${d}"]`,e);if(!o){o=document.createElement("button"),o.type="button",o.className="toggle-password",o.setAttribute("data-target",d),o.setAttribute("aria-label","Mostrar senha"),o.setAttribute("aria-pressed","false");let l=document.createElement("span");l.className="toggle-password__text",l.textContent="Mostrar",o.appendChild(l),n.insertAdjacentElement("afterend",o)}v(o,n.type==="text"),o.addEventListener("click",()=>{let l=n.type==="password";n.type=l?"text":"password",v(o,n.type==="text"),n.focus()}),n.addEventListener("keydown",l=>{l.key==="Escape"&&n.type==="text"&&(n.type="password",v(o,!1))})}e.addEventListener("submit",d=>{let o=(t?.value??"").trim().toLowerCase(),l=n?.value??"";if(!o||!l){d.preventDefault(),alert("Preencha e-mail e senha.");return}if(t&&(t.value=o),a){a.disabled=!0;let M=a.textContent;a.textContent="Entrando...",window.setTimeout(()=>{a.disabled=!1,a.textContent=M??"Entrar"},6e3)}})});var y="vana.theme",E="vana.sidebar";function q(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function T(){let e=localStorage.getItem(y);return e==="light"||e==="dark"||e==="system"?e:"system"}function w(e){let t=document.documentElement;e==="light"||e==="dark"?t.setAttribute("data-theme",e):t.removeAttribute("data-theme");let n=e==="system"?q():e;t.setAttribute("data-theme-effective",n),t.style.colorScheme=n}function _(e){localStorage.setItem(y,e),w(e)}function L(e,t){e.querySelectorAll("[data-theme]").forEach(a=>{let d=a.dataset.theme;a.setAttribute("aria-checked",d===t?"true":"false")})}function C(e,t,n){return Math.max(t,Math.min(n,e))}function I(e,t){let n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),d=C(n.top+n.height/2-a.height/2,10,window.innerHeight-a.height-10),o=C(n.right+10,10,window.innerWidth-a.width-10);e.style.top=`${Math.round(d)}px`,e.style.left=`${Math.round(o)}px`}function D(e){let t=(e||"").trim();if(!t)return"U";let n=t.includes("@")?t.split("@")[0]:t,a=n.split(/[\s._-]+/).filter(Boolean),d=a[0]?.[0]??n[0]??"U",o=(a[1]?.[0]??a[0]?.[1]??"")||"";return(d+o).toUpperCase()}document.addEventListener("DOMContentLoaded",()=>{let e=document.documentElement,t=i("#sidebarToggle");function n(){return e.getAttribute("data-sidebar")==="expanded"}function a(s){s?(e.setAttribute("data-sidebar","expanded"),localStorage.setItem(E,"expanded")):(e.removeAttribute("data-sidebar"),localStorage.setItem(E,"collapsed")),t&&(t.setAttribute("aria-expanded",s?"true":"false"),t.setAttribute("title",s?"Recolher menu":"Expandir menu"),t.setAttribute("aria-label",s?"Recolher menu":"Expandir menu"))}if(t){let s=localStorage.getItem(E),r=e.getAttribute("data-sidebar")==="expanded"||s==="expanded";a(r),t.addEventListener("click",()=>a(!n()))}let d=i("#themeBtn"),o=i("#themeMenu"),l=i("#accountBtn"),M=i("#accountMenu"),k=i("#backdrop"),H=i("#avatar");if(!d||!o||!l||!M||!k)return;let g=d,u=o,f=l,A=M,x=k;if(H){let s=f.dataset.user||"";H.textContent=D(s)}let c=null,p=null;function m(){c&&(c.hidden=!0),x.hidden=!0,g.setAttribute("aria-expanded","false"),f.setAttribute("aria-expanded","false"),c=null,p&&(p.focus(),p=null)}function B(s,r){m(),x.hidden=!1,s.hidden=!1,I(s,r),c=s,p=r,r.setAttribute("aria-expanded","true")}let S=T();w(S),L(u,S),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{T()==="system"&&w("system")}),window.addEventListener("storage",s=>{if(s.key===y){let r=T();w(r),L(u,r)}if(s.key===E&&t){let r=localStorage.getItem(E)==="expanded";a(r)}}),g.addEventListener("click",()=>{if(!u.hidden)return m();L(u,T()),B(u,g)}),u.addEventListener("click",s=>{let b=s.target?.closest("[data-theme]");if(!b)return;let h=b.dataset.theme;h&&(_(h),L(u,h),m())}),f.addEventListener("click",()=>{if(!A.hidden)return m();B(A,f)}),x.addEventListener("click",m),document.addEventListener("keydown",s=>{s.key==="Escape"&&m()}),document.addEventListener("click",s=>{if(!c)return;let r=s.target,b=c.contains(r),h=g.contains(r)||f.contains(r);!b&&!h&&m()}),window.addEventListener("resize",()=>{!c||!p||I(c,p)})});})();
//# sourceMappingURL=base.js.map
